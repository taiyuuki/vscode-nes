import{t as i,r as e}from"./index-C1mDYnUx.js";import{n as p}from"./Mapper-DR43KiVi-C3VBMEhO.js";class g extends p{whichbank=0;chrreg=[0,0,0,0,0,0,0,0];loadROM(){super.loadROM();for(let s=1;s<=32;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.chr_map[s]=0}cartWrite(s,t){if(s<32768||s>65535)super.cartWrite(s,t);else if(s===40960){if(this.whichbank>=2)this.chrreg[this.whichbank-2]=t,this.setupchr();else if(this.whichbank===0)for(let h=0;h<8;++h)this.prg_map[h]=1024*(h+8*t)%this.prgsize;else if(this.whichbank===1)for(let h=0;h<8;++h)this.prg_map[h+8]=1024*(h+8*t)%this.prgsize}else s===32768?this.whichbank=7&t:s===57344&&this.setmirroring((t&e.BIT0)===0?i.V_MIRROR:i.H_MIRROR)}setupchr(){this.setppubank(1,4,this.chrreg[2]),this.setppubank(1,5,this.chrreg[3]),this.setppubank(1,6,this.chrreg[4]),this.setppubank(1,7,this.chrreg[5]),this.setppubank(2,0,this.chrreg[0]>>1<<1),this.setppubank(2,2,this.chrreg[1]>>1<<1)}setppubank(s,t,h){for(let r=0;r<s;++r)this.chr_map[r+t]=1024*(h+r)%this.chrsize}}export{g as default};
