import{t as i}from"./index-C1mDYnUx.js";import{n as e}from"./Mapper-DR43KiVi-C3VBMEhO.js";class k extends e{prgbank0=0;prgbank1=0;chrbank=[0,0,0,0,0,0];loadROM(){super.loadROM();for(let s=0;s<16;++s)this.prg_map[s]=1024*s&this.prgsize-1;for(let s=1;s<=16;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.chr_map[s]=1024*s&this.chrsize-1}cartWrite(s,t){if(s<32768||s>49151)super.cartWrite(s,t);else if(s<=40959)switch(3&s){case 0:this.prgbank0=t,this.setmirroring(64&t?i.H_MIRROR:i.V_MIRROR),this.setbanks();break;case 1:this.prgbank1=t,this.setbanks();break;case 2:this.chrbank[0]=t,this.setbanks();break;case 3:this.chrbank[1]=t,this.setbanks()}else if(s<=49151)switch(3&s){case 0:this.chrbank[2]=t,this.setbanks();break;case 1:this.chrbank[3]=t,this.setbanks();break;case 2:this.chrbank[4]=t,this.setbanks();break;case 3:this.chrbank[5]=t,this.setbanks()}}setbanks(){for(let s=1;s<=16;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.prg_map[s]=1024*(s+8*this.prgbank0)&this.prgsize-1;for(let s=0;s<8;++s)this.prg_map[s+8]=1024*(s+8*this.prgbank1)&this.prgsize-1;this.setppubank(1,4,this.chrbank[2]),this.setppubank(1,5,this.chrbank[3]),this.setppubank(1,6,this.chrbank[4]),this.setppubank(1,7,this.chrbank[5]),this.setppubank(2,0,this.chrbank[0]),this.setppubank(2,2,this.chrbank[1])}setppubank(s,t,r){for(let h=0;h<s;++h)this.chr_map[h+t]=1024*(h+s*r)&this.chrsize-1}}export{k as default};
