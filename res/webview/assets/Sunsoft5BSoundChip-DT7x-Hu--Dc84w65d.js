import{a as r,r as l}from"./index-C1mDYnUx.js";class s{timers=[new r(32),new r(32),new r(32)];enable=[!1,!1,!1];useenvelope=[!1,!1,!1];volume=[0,0,0];enval=0;static VOLTBL=s.getvoltbl();write(t,e){switch(t){case 0:this.timers[0].setperiod((3840&this.timers[0].getperiod())+e);break;case 1:this.timers[0].setperiod((255&this.timers[0].getperiod())+((15&e)<<8));break;case 2:this.timers[1].setperiod((3840&this.timers[1].getperiod())+e);break;case 3:this.timers[1].setperiod((255&this.timers[1].getperiod())+((15&e)<<8));break;case 4:this.timers[2].setperiod((3840&this.timers[2].getperiod())+e);break;case 5:this.timers[2].setperiod((255&this.timers[2].getperiod())+((15&e)<<8));break;case 7:for(let i=0;i<3;++i)this.enable[i]=!(e&1<<i);break;case 8:this.volume[0]=15&e,this.useenvelope[0]=(e&l.BIT4)!==0;break;case 9:this.volume[1]=15&e,this.useenvelope[1]=(e&l.BIT4)!==0;break;case 10:this.volume[2]=15&e,this.useenvelope[2]=(e&l.BIT4)!==0;break;case 13:this.enval=15}}clock(t){this.clockenvelope(),this.timers[0].clock(t),this.timers[1].clock(t),this.timers[2].clock(t)}getval(){return(this.enable[0]?(this.useenvelope[0]?this.enval:s.VOLTBL[this.volume[0]])*this.timers[0].getval():0)+(this.enable[1]?(this.useenvelope[1]?this.enval:s.VOLTBL[this.volume[1]])*this.timers[1].getval():0)+(this.enable[2]?(this.useenvelope[2]?this.enval:s.VOLTBL[this.volume[2]])*this.timers[2].getval():0)}static getvoltbl(){const t=new Array(16);for(let e=0;e<16;++e)t[e]=Math.floor(90*Math.pow(1.4,e));return t}clockenvelope(){this.enval=0}}export{s};
