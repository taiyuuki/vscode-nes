import{t as h}from"./index-C1mDYnUx.js";import{n as r}from"./Mapper-DR43KiVi-C3VBMEhO.js";class k extends r{prgbank0=0;prgbank1=0;prgbank2=0;chrbank=[0,0];loadROM(){super.loadROM();for(let s=0;s<24;++s)this.prg_map[s]=1024*s&this.prgsize-1;for(let s=1;s<=8;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.chr_map[s]=1024*s&this.chrsize-1}cartWrite(s,t){if(s<32768||s>65535)super.cartWrite(s,t);else switch(s>>12){case 8:this.prgbank0=15&t,this.setbanks();break;case 9:this.setmirroring(1&t?h.H_MIRROR:h.V_MIRROR),this.chrbank[0]=15&this.chrbank[0]|t<<3&16,this.chrbank[1]=15&this.chrbank[1]|t<<2&16,this.setbanks();break;case 10:this.prgbank1=15&t,this.setbanks();break;case 12:this.prgbank2=15&t,this.setbanks();break;case 14:this.chrbank[0]=16&this.chrbank[0]|15&t,this.setbanks();break;case 15:this.chrbank[1]=16&this.chrbank[1]|15&t,this.setbanks()}}setbanks(){for(let s=1;s<=8;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.prg_map[s]=1024*(s+8*this.prgbank0)%(this.prgsize-1);for(let s=0;s<8;++s)this.prg_map[s+8]=1024*(s+8*this.prgbank1)%(this.prgsize-1);for(let s=0;s<8;++s)this.prg_map[s+16]=1024*(s+8*this.prgbank2)%(this.prgsize-1);this.setppubank(4,0,this.chrbank[0]),this.setppubank(4,4,this.chrbank[1])}setppubank(s,t,i){for(let a=0;a<s;++a)this.chr_map[a+t]=1024*(a+4*i)%(this.chrsize-1)}}export{k as default};
