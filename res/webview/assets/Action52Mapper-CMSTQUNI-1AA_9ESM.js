import{n as p}from"./Mapper-DR43KiVi-C3VBMEhO.js";import{t as r}from"./index-C1mDYnUx.js";class c extends p{ram=[0,0,0,0];prgchip=0;prgpage=0;chrpage=0;prgmode=!1;loadROM(){super.loadROM(),this.cartWrite(32768,0)}cartWrite(i,e){if(i<=24575)this.ram[3&i]=15&e;else if(i>=32768){this.chrpage=((15&i)<<2)+(3&e),this.prgmode=!!(32&i),this.prgpage=i>>6&31,this.prgchip=i>>11&3,this.setmirroring(8192&i?r.H_MIRROR:r.V_MIRROR);for(let t=0;t<8;++t)this.chr_map[t]=1024*(8*this.chrpage+t)%this.chrsize;let s=0;switch(this.prgchip){case 0:s=0;break;case 1:s=524288;break;case 3:s=1048576}if(this.prgmode)for(let t=0;t<16;++t)this.prg_map[t]=(1024*(16*this.prgpage+t)+s)%this.prgsize,this.prg_map[t+16]=(1024*(16*this.prgpage+t)+s)%this.prgsize;else for(let t=0;t<32;++t)this.prg_map[t]=(1024*(32*(this.prgpage>>1)+t)+s)%this.prgsize}}cartRead(i){return i>=32768?this.prg[this.prg_map[(32767&i)>>10]+(1023&i)]:i<24576?15&this.ram[3&i]:i>>8}reset(){this.cartWrite(32768,0)}}export{c as default};
