import{n as e}from"./Mapper-DR43KiVi-C3VBMEhO.js";import"./index-C1mDYnUx.js";class c extends e{whichbank=0;chrreg=[0,0,0,0,0,0];loadROM(){super.loadROM();for(let s=1;s<=32;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.chr_map[s]=0}cartWrite(s,h){if(s<32768||s>65535)super.cartWrite(s,h);else if(s===32769){if(h&=63,this.whichbank<=5)this.chrreg[this.whichbank]=h,this.setupchr();else if(this.whichbank===6)for(let t=0;t<8;++t)this.prg_map[t]=1024*(t+8*h)%this.prgsize;else if(this.whichbank===7)for(let t=0;t<8;++t)this.prg_map[t+8]=1024*(t+8*h)%this.prgsize}else s===32768&&(this.whichbank=7&h)}setupchr(){this.setppubank(1,4,this.chrreg[2]),this.setppubank(1,5,this.chrreg[3]),this.setppubank(1,6,this.chrreg[4]),this.setppubank(1,7,this.chrreg[5]),this.setppubank(2,0,this.chrreg[0]>>1<<1),this.setppubank(2,2,this.chrreg[1]>>1<<1)}setppubank(s,h,t){for(let i=0;i<s;++i)this.chr_map[i+h]=1024*(t+i)%this.chrsize}}export{c as default};
