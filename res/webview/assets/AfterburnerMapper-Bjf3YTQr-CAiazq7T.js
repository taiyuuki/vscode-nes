import{r as i,t as h}from"./index-C1mDYnUx.js";import{n}from"./Mapper-DR43KiVi-C3VBMEhO.js";class m extends n{bank=0;useromnt=!1;romnt1=0;romnt2=0;loadROM(){super.loadROM();for(let s=0;s<16;++s)this.prg_map[s]=1024*s&this.prgsize-1;for(let s=1;s<=16;++s)this.prg_map[32-s]=this.prgsize-1024*s;for(let s=0;s<8;++s)this.chr_map[s]=1024*s&this.chrsize-1}cartWrite(s,t){if(s<32768||s>65535)super.cartWrite(s,t);else if(s<=36863)this.setppubank(2,0,t);else if(s<=40959)this.setppubank(2,2,t);else if(s<=45055)this.setppubank(2,4,t);else if(s<=49151)this.setppubank(2,6,t);else if(s<=53247)this.romnt1=128|t;else if(s<=57343)this.romnt2=128|t;else if(s<=61439)this.useromnt=(t&i.BIT4)!==0,this.setmirroring((t&i.BIT0)===0?h.V_MIRROR:h.H_MIRROR);else if(s<=65535){this.bank=15&t;for(let e=0;e<16;++e)this.prg_map[e]=1024*(e+16*this.bank)&this.prgsize-1}}setppubank(s,t,e){for(let r=0;r<s;++r)this.chr_map[r+t]=1024*(s*e+r)%this.chrsize}ppuRead(s){if(s<8192)return this.chr[this.chr_map[s>>10]+(1023&s)];switch(3072&s){case 0:return this.useromnt?this.chr[(1023&s)+1024*this.romnt1]:this.nt0[1023&s];case 1024:return this.useromnt?this.chr[(1023&s)+1024*this.romnt2]:this.nt1[1023&s];case 2048:return this.useromnt?this.chr[(1023&s)+1024*this.romnt2]:this.nt2[1023&s];default:if(s>=16128){let t=31&s;return t>=16&&!(3&t)&&(t-=16),this.ppu.pal[t]}return this.useromnt?this.chr[(1023&s)+1024*this.romnt1]:this.nt3[1023&s]}}}export{m as default};
